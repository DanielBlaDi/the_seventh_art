<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil</title>
    <link rel="stylesheet" href="/css/perfil.css"> 
</head>
<body>

    <div class="app-container">
        <div class="content-wrapper">
            <div class="p-4 max-w-screen-lg mx-auto">
                
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1>Perfil</h1> 
                        <p class="text-muted-foreground">Gestiona tu información personal</p>
                    </div>
                    <form th:action="@{/logout}" method="post" style="display:inline">
                        <button type="submit" class="btn-logout" style="background:none;border:none;padding:0;cursor:pointer;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="h-4 w-4 mr-2" aria-hidden="true">
                            <path d="m16 17 5-5-5-5"></path>
                            <path d="M21 12H9"></path>
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            </svg>
                            Cerrar Sesión
                        </button>
                    </form>
                </div>
                
                <div class="card flex flex-col gap-6 rounded-xl border p-6 mb-6">
                    <div class="flex items-center gap-4">
                        <div class="bg-indigo-100 rounded-full p-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-12 w-12 text-indigo-600" aria-hidden="true"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        </div>
                        <div class="flex-1">
                            <h2>Usuario Demo</h2>
                            <p class="text-muted-foreground">demo@google.com</p>
                        </div>
                        <button class="btn inline-flex items-center justify-center border bg-background text-foreground hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 has-[>svg]:px-3" onclick="openEditModal()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 mr-2" aria-hidden="true"><path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"></path></svg>
                            Editar
                        </button>
                    </div>
                </div>
                
                <div class="card flex flex-col gap-6 rounded-xl border p-6 mb-6">
                    <h3 class="mb-4">Información Personal</h3>
                    <div class="grid-cols-2 gap-4 stats-grid">
                        
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"></path><rect x="2" y="4" width="20" height="16" rx="2"></rect></svg>
                            <div><p class="text-sm text-muted-foreground">Email</p><p>demo@google.com</p></div>
                        </div>
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg>
                            <div><p class="text-sm text-muted-foreground">Edad</p><p>28 años</p></div>
                        </div>
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path></svg>
                            <div><p class="text-sm text-muted-foreground">Peso</p><p>75 kg</p></div>
                        </div>
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path></svg>
                            <div><p class="text-sm text-muted-foreground">Altura</p><p>175 cm</p></div>
                        </div>
                    </div>
                </div>
                
                <div class="card flex flex-col gap-6 rounded-xl border p-6 mb-6">
                    <h3 class="mb-4">Objetivos y Actividad</h3>
                    <div class="grid-cols-2 gap-4 stats-grid">
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>
                            <div><p class="text-sm text-muted-foreground">Objetivo</p><p>Subir de peso</p></div>
                        </div>
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-muted-foreground" aria-hidden="true"><path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path></svg>
                            <div><p class="text-sm text-muted-foreground">Nivel de Actividad</p><p>Moderado</p></div>
                        </div>
                    </div>
                </div>
                
                <div class="card flex flex-col gap-6 rounded-xl border p-6">
                    <h3 class="mb-4">Estadísticas Totales</h3>
                    <div class="grid-cols-2 gap-4 stats-grid">
                        <div class="text-center p-4 card-stat-small card-stat-blue">
                            <p class="text-2xl mb-1">156</p>
                            <p class="text-sm text-muted-foreground">Entrenamientos Totales</p>
                        </div>
                        <div class="text-center p-4 card-stat-small card-stat-green">
                            <p class="text-2xl mb-1">89 hrs</p>
                            <p class="text-sm text-muted-foreground">Tiempo de Ejercicio</p>
                        </div>
                        <div class="text-center p-4 card-stat-small card-stat-orange">
                            <p class="text-2xl mb-1">23,450</p>
                            <p class="text-sm text-muted-foreground">Calorías Quemadas</p>
                        </div>
                        <div class="text-center p-4 card-stat-small card-stat-purple">
                            <p class="text-2xl mb-1">42</p>
                            <p class="text-sm text-muted-foreground">Racha Máxima (días)</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        
        <nav class="fixed-nav">
            <a href="/principal_home" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-svg h-6 w-6"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span class="text-xs">Home</span>
            </a>
            <a href="/rutinas" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-svg h-6 w-6" aria-hidden="true"><path d="M13 5h8"></path><path d="M13 12h8"></path><path d="M13 19h8"></path><path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path></svg>
                <span class="text-xs">Mis Rutinas</span>
            </a>
            <a href="/perfil" class="nav-item active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-svg h-6 w-6"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span class="text-xs">Perfil</span>
            </a>
        </nav>
    </div>

    <div id="editModal" class="modal-overlay">
        <div class="modal-content">
            <form id="editForm" onsubmit="handleFormSubmit(event)" method="POST">
                
                <div class="card-user-info-modal flex items-center gap-4">
                    <div class="user-icon-large">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <div class="flex-1">
                        <h2>Usuario Demo</h2>
                        <p class="text-muted-foreground">demo@google.com</p>
                    </div>
                </div>

                <div class="card-form-modal">
                    <h3 class="font-semibold mb-4">Información Personal</h3>
                    
                    <div class="form-grid">
                        
                        <div class="form-group-full">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" id="nombre" name="nombre" value="Usuario Demo" class="input-field input-readonly" readonly>
                        </div>

                        <div class="form-group-full">
                            <label for="email" class="form-label">Correo Electrónico</label>
                            <input type="email" id="email" name="email" value="demo@google.com" class="input-field input-readonly" readonly>
                        </div>

                        <div class="form-group-half">
                            <label for="peso" class="form-label">Peso (kg)</label>
                            <input type="number" id="peso" name="peso" value="75" class="input-field">
                        </div>

                        <div class="form-group-half">
                            <label for="altura" class="form-label">Altura (cm)</label>
                            <input type="number" id="altura" name="altura" value="175" class="input-field">
                        </div>

                        <div class="form-group-half">
                            <label for="edad" class="form-label">Edad</label>
                            <input type="number" id="edad" name="edad" value="28" class="input-field">
                        </div>
                        
                        <div class="btn-action-group">
                            <button type="button" class="btn btn-cancel" onclick="closeEditModal()">
                                Cancelar
                            </button>
                            <button type="submit" class="btn btn-primary">
                                Guardar Cambios
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        function openEditModal() {
            document.getElementById('editModal').style.display = 'flex';
            document.body.style.overflow = 'hidden'; 
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        document.getElementById('editModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeEditModal();
            }
        });
        
        /**
         * Maneja el envío del formulario. Simula la lógica de una API que 
         * actualiza los datos y luego redirige al perfil.
         */
        function handleFormSubmit(event) {
            // Previene el envío del formulario tradicional (para simular AJAX/Redirección)
            event.preventDefault(); 
            
            // 1. Cierra el modal de edición
            closeEditModal(); 
            
            // 2. Simula el procesamiento y luego redirige a la página principal de perfil
            // Esto cumple con el requisito de volver a la página de la cual se desplegó.
            window.location.href = '/perfil'; 
        }
    </script>

</body>
</html>