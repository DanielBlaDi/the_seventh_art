<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Estad√≠sticas</title>

    <!-- Hoja de estilos espec√≠fica de esta vista -->
    <link rel="stylesheet" th:href="@{/css/stats.css}">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<div class="layout">
    <!-- Contenedor central de la p√°gina (controla ancho total) -->
    <div class="page-shell">

        <!-- ================= CABECERA ================= -->
        <header class="page-header">
            <button type="button" class="back-row" onclick="history.back()">
                <span class="back-arrow">‚Üê</span>
                <span>Volver</span>
            </button>

            <div class="page-title">
                <h1>Bloque de estad√≠sticas</h1>
                <p th:text="${fecha}">Default S√°bado, 29 De Noviembre De 2025</p>
            </div>
        </header>

        <!-- ================= TARJETA PRINCIPAL ================= -->
        <main class="card">
            <div class="chart-container">
                <div class="chart-wrapper">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </main>

        <!-- ================= GRID DE M√öSCULOS ================= -->
        <section class="muscle-grid">
            <div class="muscle-card" th:each="musculo : ${musculos}">
                <div class="muscle-card-icon">
                    <!-- icono simple, luego puedes cambiarlo -->
                    <span>üèãÔ∏è</span>
                </div>
                <div class="muscle-card-name" th:text="${musculo.nombreMusculo}">
                    Pectorales
                </div>
                <div class="muscle-card-value" th:text="${musculo.porcentaje + '%'}">
                    45%
                </div>
            </div>
        </section>

        <!-- ================= RESUMEN DEL PROGRESO ================= -->
        <section class="summary-card">
            <h2 class="summary-title">Resumen del Progreso</h2>

            <div class="summary-items">

                <div class="summary-item">
                    <div class="summary-icon summary-icon-blue">
                        üéØ
                    </div>
                    <div class="summary-text">
                        <p class="summary-label">Musculo m√°s trabajado</p>
                        <p class="summary-value"
                        th:text="${ejercicioMasTrabajado}">Default Cu√°driceps</p>
                    </div>
                </div>

                <div class="summary-item">
                    <div class="summary-icon summary-icon-orange">
                        üìà
                    </div>
                    <div class="summary-text">
                        <p class="summary-label">Sets realizados del m√∫sculo</p>
                        <p class="summary-value"
                        th:text="${totalSetsdeEjercicioMasTrabajado}">
                            0 sets Default
                        </p>
                    </div>
                </div>

                <div class="summary-item">
                    <div class="summary-icon summary-icon-purple">
                        ‚è±
                    </div>
                    <div class="summary-text">
                        <p class="summary-label">Tiempo total de entrenamiento</p>
                        <p class="summary-value"
                        th:text="${totalTiempoEntrenamiento}">
                            89 horas Default
                        </p>
                    </div>
                </div>

            </div>
        </section>
    </div>

    <!-- ========== NAV INFERIOR ========== -->
    <nav class="fixed-nav">
        <a href="principal_home" class="nav-item active">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="icon-svg h-6 w-6">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span class="text-xs">Inicio</span>
        </a>

        <a href="rutinas" class="nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="icon-svg h-6 w-6" aria-hidden="true">
                <path d="M13 5h8"></path>
                <path d="M13 12h8"></path>
                <path d="M13 19h8"></path>
                <path d="m3 17 2 2 4-4"></path>
                <path d="m3 7 2 2 4-4"></path>
            </svg>
            <span class="text-xs">Mis Rutinas</span>
        </a>

        <a href="perfil" class="nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="icon-svg h-6 w-6">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span class="text-xs">Perfil</span>
        </a>
    </nav>
</div>

<!-- ================= SCRIPT DE LA GR√ÅFICA ================= -->
<script th:inline="javascript">
    /*<![CDATA[*/
    const labels = /*[[${labels}]]*/ [];
    const values = /*[[${values}]]*/ [];

    const ctx = document.getElementById('radarChart').getContext('2d');

    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Nivel de trabajo muscular',
                data: values,
                fill: true,
                // colores de la gr√°fica
                backgroundColor: 'rgba(129, 140, 248, 0.55)',
                borderColor: 'rgba(79, 70, 229, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(79, 70, 229, 1)',
                pointRadius: 3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,

            // animaci√≥n: el pol√≠gono crece desde el centro
            animation: {
                duration: 1200,
                easing: 'easeOutCubic'
            },
            animations: {
                radius: {
                    duration: 1200,
                    easing: 'easeOutCubic',
                    from: 0
                }
            },

            scales: {
                r: {
                    min: 0,
                    max: 100,
                    grid: {
                        color: '#e5e7eb'
                    },
                    angleLines: {
                        color: '#e5e7eb'
                    },
                    pointLabels: {
                        font: { size: 15, weight: '500' },
                        color: '#374151'
                    },
                    ticks: {
                        display: true,
                        stepSize: 10,
                        backgroundColor: 'transparent',
                        color: '#9ca3af',
                        font: { size: 11 }
                    }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });
    /*]]>*/
</script>

</body>
</html>
